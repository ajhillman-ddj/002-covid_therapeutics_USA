"0","therapeuticsByState <- therapeuticsData |>"
"0","  group_by(Order.Label, State.Code) |>"
"0","  summarise(totalCourses = sum(Courses.Available)) |>"
"0","  pivot_wider(names_from = Order.Label, values_from = totalCourses)"
"1","`summarise()` has grouped output by 'Order.Label'. You can override using the `.groups` argument.
"
"0","statePopDataFiltered <- statePopData |>"
"0","  mutate(stateCode = state.abb[match(NAME,state.name)]) |>"
"0","  filter(!is.na(stateCode))"
"0",""
"0","therapeuticsByState <- merge(x = therapeuticsByState, y = statePopDataFiltered[c('stateCode', 'POPESTIMATE2020')], by.x = 'State.Code', by.y = 'stateCode', all.x = TRUE) |>"
"0","  filter(!is.na(POPESTIMATE2020)) |>"
"0","  mutate(totalCoursesPer100000 = (Evusheld + Molnupiravir + Paxlovid)*100000/POPESTIMATE2020) |>"
"0","  mutate(evusheldCoursesPer100000 = Evusheld*100000/POPESTIMATE2020) |>"
"0","  mutate(molnuCoursesPer100000 = Molnupiravir*100000/POPESTIMATE2020) |>"
"0","  mutate(paxlovidCoursesPer100000 = Paxlovid*100000/POPESTIMATE2020) |>"
"0","  mutate(populationShare = POPESTIMATE2020/filter(statePopData, NAME == 'United States')$POPESTIMATE2020) |>"
"0","  mutate(evusheldShare = Evusheld / therapeuticsDataSummary$Evusheld) |>"
"0","  mutate(molnuShare = Molnupiravir / therapeuticsDataSummary$Molnupiravir) |>"
"0","  mutate(paxlovidShare = Paxlovid / therapeuticsDataSummary$Paxlovid) |>"
"0","  mutate(totalShare = (Evusheld + Molnupiravir + Paxlovid) / (therapeuticsDataSummary$Evusheld + therapeuticsDataSummary$Molnupiravir + therapeuticsDataSummary$Paxlovid))"
"0",""
"0","usCasesData <- mutate(usCasesData, State.Territory = case_when("
"0","                      State.Territory == ""New York*"" ~ ""New York"","
"0","                      TRUE ~ State.Territory"
"0","      )) |>"
"0","  mutate(stateCode = state.abb[match(State.Territory, state.name)])"
"0",""
"0","therapeuticsByState <- merge(x = therapeuticsByState, y = usCasesData[c(""stateCode"", ""X7.Day.Cases.Rate.per.100000"")], by.x = ""State.Code"", by.y = ""stateCode"", all.x = TRUE)"
"0",""
"0","therapeuticsByState <- therapeuticsByState |>"
"0","  mutate(`X7.Day.Cases.Rate.per.100000` = as.numeric(`X7.Day.Cases.Rate.per.100000`)) |>"
"0","  mutate(casesShare = `X7.Day.Cases.Rate.per.100000`/ sum(`X7.Day.Cases.Rate.per.100000`))"
"0",""
"0","write.table(therapeuticsByState, ""rOutputs/byStateData.csv"", row.names = FALSE, col.names = TRUE, sep = "","")"
"0",""
